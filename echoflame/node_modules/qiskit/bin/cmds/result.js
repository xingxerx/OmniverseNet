/**
 * @license
 *
 * Copyright (c) 2017, IBM.
 *
 * This source code is licensed under the Apache License, Version 2.0 found in
 * the LICENSE.txt file in the root directory of this source tree.
 */

'use strict';

const qiskit = require('../..');
const logger = require('../lib/logger');

exports.command = 'result <jobId>';

exports.aliases = ['re'];

exports.desc =
  'Get the result of a background job generated by an algorithm method. ' +
  'The engine is ommited because IBM Q is the unique which uses background jobs for now.';

exports.builder = {
  jobId: {
    desc: 'Identifier of the job to get the result',
    type: 'string',
  },
};

exports.handler = argv => {
  logger.title(qiskit.version);

  qiskit.algo
    .result(argv.jobId, { custom: global.qiskit.cloud })
    .then(res => {
      logger.resultHead();
      logger.json(res);
    })
    .catch(err => {
      logger.error('Making the request', err);
      process.exit(1);
    });
};
